<h3 class="green">حساب العمولة</h3>

<form name="frmCalCommission" class="form-inline" role="form">
	<script type="text/javascript">
		String.prototype.replaceArray = function(find, replace) {
			var replaceString = this;
			var regex;
			for (var i = 0; i < find.length; i++) {
				regex = new RegExp(find[i], "g");
				replaceString = replaceString.replace(regex, replace[i]);
			}
			return replaceString;
		};

		function parseArabic(str) {
			return Number(
				str.replace(/[٠١٢٣٤٥٦٧٨٩]/g, function(d) {
					return d.charCodeAt(0) - 1632;
				})
			);
		}

		function precisionRound(number, precision) {
			var factor = Math.pow(10, precision);
			return Math.floor(number * factor) / factor;
		}

		function funCalCommission(factor) {
			$(".info").show();
			var total = document.frmCalCommission.total.value;

			total = parseInt(parseArabic(total));
			var commissionFactor = 0.01;
			var factorDiscountPercent;
			if (!factor) {
				factor = 0.01;
				factorDiscountPercent = 1;
			} else {
				factorDiscountPercent = (factor * 100).toFixed(2);
			}
			var factorDiscount = factor;
			var commissionValue = Math.floor(total * factorDiscount);
			var commissionValueTax = commissionValue * 0.05;
			commissionValueTax = precisionRound(commissionValueTax, 0);
			var totalAmount = commissionValue + commissionValueTax;
			var commissionValueBeforeDiscount = Math.floor(total * 0.01);

			$("#commissionValue").text(commissionValue);
			$("#commissionValueBeforeDiscount").text(
				commissionValueBeforeDiscount
			);

			$("#commissionValueTax").text(commissionValueTax);
			$("#totalAmount").text(commissionValue);
			$("#factorDiscountPercent").text(factorDiscountPercent);
		}
	</script>

	<b>حساب قيمة العمولة:</b>
	<br>إذا تم بيع السلعة بسعر
	<input type="text" pattern="\d*" class="form-control formcommission" name="total" size="8" maxlength="10" value="0" style="text-align: center; direction: ltr; " onkeyup="funCalCommission();">
	ريال فأن المبلغ المستحق دفعه هو:
	<span class="label label-primary" id="totalAmount"> 0</span> ريال
	<div class="info" style="display:none">
		<br>التفاصيل:
		<br>
		<br>عمولة الموقع   مع ضريبة القيمة المضافة هي :
		<span id="commissionValue"> 0</span> ريال <br>
	</div>

	</form>
<div class="info" style="display:none">
	<hr>
	مؤسسة موقع حراج للتجارة <br>
	سجل تجاري رقم: 1010283122 <br>
	الرقم الضريبي: 300710482300003 <br>
	قرطبة، الرياض ، المملكة العربية السعودية.

	<hr>
</div>
